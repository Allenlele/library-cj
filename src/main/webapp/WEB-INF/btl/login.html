<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Library|登陆</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
	<link href="/css/bootstrap.css" rel="stylesheet">
	<link href="/css/flat-ui.css" rel="stylesheet">
</head>
<body>
<div class="login">
        <div class="login-screen">
          <div class="login-icon">
            <img src="/img/book_logo.png"/>
            <h4>Welcome to <small> Library </small></h4>
          </div>

          <div class="login-form">
            <div class="control-group">
              <input type="text" class="login-field" value="" placeholder="Enter your name" id="name" />
              <label class="login-field-icon fui-man-16" for="login-name"></label>
            </div>

            <div class="control-group">
              <input type="password" class="login-field" value="" placeholder="Password" id="password" />
              <label class="login-field-icon fui-lock" for="login-pass"></label>
            </div>

            <a class="btn btn-primary btn-large btn-block" id="loginBtn">Login</a>
            <a class="login-link" href="#">Lost your password?</a>
          </div>
        </div>
      </div>
</body>
<script src="/js/jquery-2.1.4.js"></script>
<script src="/js/noty/packaged/jquery.noty.packaged.js"></script>
<script type="text/javascript">
	function generate(type) {
	    var n = noty({
	        text        : type,
	        type        : type,
	        dismissQueue: false,
	        layout      : 'top',
	        theme       : 'defaultTheme'
	    });
	    debugger;
	    console.log(type + ' - ' + n.options.id);
	    return n;
	}
	(function(){
		$("#loginBtn").on('click',function(){
			var name = $("#name").val();
			var password = $("#password").val();
			$.ajax({
			   type: "POST",
			   url: "/login",
			   data: {name:name,password:password},
			   success: function(data){
				   window.location.href="/main";
			   },
			   error: function(data){
				   var warning = generate('warning');
				   $.noty.setText(warning.options.id, '用户名和密码不匹配！');
				   setTimeout(function () {
			            $.noty.close(warning.options.id);
			        }, 2000);
			   },
			});
		});
	})();
  </script>
</html>